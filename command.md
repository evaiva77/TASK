[<назад](setting.md) [*содержание*](readme.md) [вперед>](github.md)

## Основные команды в Git
---

## git add: добавление файлов в индекс

Если вы создадите в проекте файл, то Git его посчитает неотслеживаемым (untracked). Такие файлы нельзя перенести в репозиторий без подготовки к сохранению. За подготовку отвечает индекс — промежуточная зона перед репозиторием. Перенести файлы в индекс можно с помощью команды **git add**.

В индекс можно добавить один файл, несколько или все сразу. После попадания в индекс файлы становятся подготовленными к коммиту (staged):

**Добавляем в индекс один файл**
> git add file_name

**Добавляем в индекс несколько файлов**
>git add file_name_1 file_name_2 file_name_3

**Добавляем в индекс все изменённые файлы**
>git add .

## git status: проверка статуса репозитория

Команда **git status** даёт представление о текущем состоянии репозитория. Она показывает, какие неотслеживаемые файлы попали в проект, какие файлы находятся в индексе и какие сохранённые файлы вы изменили в репозитории.

## git commit: добавление файлов в репозиторий

Когда все файлы подготовлены к сохранению, их можно перенести из индекса в репозиторий. Для этого нужна команда **git commit** с опцией **-m** и сообщением коммита. Сообщение пишется в кавычках и обычно латиницей:
>git commit -m "Commit message"

Сообщения обязательны — по ним разработчики ориентируются в проекте. Суть в том, чтобы из сообщения коммита было понятно, какие изменения произошли.

## git log: просмотр журнала коммитов

Команда **git log** показывает историю коммитов в обратном хронологическом порядке. Вы можете посмотреть хеш, сообщение, дату и ник автора коммита.
Для выхода из данной команды используйте "Q" от от слова "quit".

## git diff: просмотр изменений до коммита

Команда **git diff** показывает разницу между последним коммитом и текущим состоянием репозитория. То есть последний коммит сравнивается со всеми неотслеживаемыми файлами, которые ещё не переведены в индекс.

Можно добавить имя файла и сравнить его содержимое с последним коммитом.

Ещё вариант: вместо имени файла можно использовать хеш коммита. Также можно добавить опцию *--staged* и сравнить версию кода после последнего коммита с отслеживаемым состоянием репозитория — со всеми файлами, которые находятся в индексе.

**Смотрим разницу между последним коммитом и текущим состоянием репозитория**
>git diff

**Разница между последним коммитом и текущим состоянием файла**
>git diff file_name

**Разница между последним коммитом и коммитом с указанным хешем**
>git diff commit_hash

**Разница между последним коммитом и отслеживаемым состоянием репозитория**
>git diff --staged

## git difftool: запуск внешнего инструмента сравнения файлов

Команда **git difftool** работает по принципу команды **git diff** — сравнивает файлы и находит в них различия. Только git diff отображает результат в текстовом виде, а git difftool в графическом: команда запускает внешние программы с визуальными инструментами сравнения файлов.

## git restore: отмена изменений

Команда **git restore** возвращает файл к состоянию последнего коммита. Она отменяет все изменения, если файл не перенесён в индекс. Если файл попал в индекс, то вместе с названием команды нужно использовать опцию **--staged**.

**Вернуть неотслеживаемый файл к состоянию последнего коммита**
>git restore file_name

**Вернуть все файлы из индекса к состоянию последнего коммита**
>git restore --staged

**Вернуть указанный файл из индекса к состоянию последнего коммита**
>git restore --staged file_name

## git rm: удаление файлов из индекс

Команда **git rm** позволяет удалить файл, который по ошибке попал в индекс. После выполнения команды файл пропадёт из индекса и из папки на вашем компьютере, в которой хранится проект. Если вы хотите удалить файл только из индекса, то команду **git rm** нужно использовать вместе с опцией **--cached**.

**Удалить файл из индекса и рабочей директории**
>git rm file_name

**Удалить файл из индекса и оставить в папке на компьютере**
>git rm --cached file_name

## git reset: откат коммита

Команда **git reset** позволяет отменить любое количество сделанных коммитов и вернуть проект к какому-то состоянию в прошлом. Команду нужно выполнять с осторожностью, поскольку она может навсегда переписать историю проекта.

На выбор можно использовать три режима: **--soft, --mixed и --hard**.

В режиме --soft проект откатывается к указанному коммиту и переводит все последующие коммиты в индекс. Вы можете сразу сделать новый коммит и перезаписать историю проекта, оставив исходные файлы без изменений.

В режиме --mixed откаченные файлы попадают в неотслеживаемую зону. Вы можете эти файлы изменить, удалить или вернуть обратно в индекс.

В режиме --hard проект откатывается к указанному коммиту и удаляет все последующие коммиты без возможности их восстановления.

**Откатываемся и переводим последующие коммиты в индекс**
>git reset --soft commit_hash

**Откатываемся и переводим последующие коммиты в неотслеживаемую зону**
>git reset --mixed commit_hash

**Откатываемся и удаляем все последующие коммиты**
>git reset --hard commit_hash